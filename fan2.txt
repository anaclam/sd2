typedef struct fan_s fan;

	int fanSpeed;
	int fanLCD;
	int temp;

void 
struct fan_s
{
	int tempPin = A1;   // the output pin of LM35
	int fan = 11;       // the pin where fan is
	int led = 8;        // led pin
	int tempMin = 30;   // the temperature to start the fan
	int tempMax = 70;   // the maximum temperature when fan is at 100%

} fan_default = {A1,11,8,30,70}


void loop() {  
   temp = readTemp();     // get the temperature
   if(temp < tempMin) {   // if temp is lower than minimum temp
       fanSpeed = 0;      // fan is not spinning
       digitalWrite(fan, LOW);       
   } 
   if((temp >= tempMin) && (temp <= tempMax)) {  // if temperature is higher than minimum temp
       fanSpeed = map(temp, tempMin, tempMax, 32, 255); // the actual speed of fan
       fanLCD = map(temp, tempMin, tempMax, 0, 100);  // speed of fan to display on LCD
       analogWrite(fan, fanSpeed);  // spin the fan at the fanSpeed speed
   } 
   
   if(temp > tempMax) {        // if temp is higher than tempMax
     digitalWrite(led, HIGH);  // turn on led 
     digitalWrite(fan, HIGH);  // turn fan high
   } 
   else {                      // else turn of led
     digitalWrite(led, LOW); 
   }



int readTemp() 
{  // get the temperature and convert it to celsius
  temp = analogRead(tempPin);
  return temp * 0.48828125;
}
